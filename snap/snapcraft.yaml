name: sshoot
version: git
summary: Manage sshuttle VPN sessions
description: |
  Command-line interface to manage multiple sshuttle VPN sessions.

  sshoot allows to define multiple VPN sessions using sshuttle and start/stop
  them as needed.

license: GPL-3.0+
confinement: classic
grade: stable
base: core20

apps:
  sshoot:
    command: bin/sshoot
    environment:
      CORE_SNAP: /snap/core20/current
      PATH: $SNAP/bin:$SNAP/usr/bin:$CORE_SNAP/sbin:$CORE_SNAP/bin:$CORE_SNAP/usr/sbin:$CORE_SNAP/usr/bin{PATH:+:$PATH}
      LD_LIBRARY_PATH: ${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}$SNAP/lib:$CORE_SNAP/lib:$CORE_SNAP/usr/lib
    completer: sshoot-completion

parts:
  sshoot:
    plugin: python
    source: .
    source-type: git
    python-packages:
      - sshuttle
    filesets:
      bins:
        - bin/sshoot
        - bin/sshuttle
    prime:
      - $bins
      - lib

  completion:
    plugin: dump
    source: snap/local
